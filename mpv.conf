# Version 3.3
# 09/10/2025

###############################################################################################################################################

# Player GUI Options

###############################################################################################################################################

# Adjust all as needed.

input-ar-delay = 500
input-ar-rate = 20
keep-open = yes
keep-open-pause = no
osd-duration = 1500
osd-playing-msg = ${filename}
script-opts = osc-timems=yes
autofit-larger = 100%x95%
osd-bar-align-x = 0
osd-bar-align-y = 0
osd-font-size = 25
osd-align-x = left
osd-align-y = top
hidpi-window-scale = yes

###############################################################################################################################################

# Video Output Options

###############################################################################################################################################

# Specifically made for windows.

vo = gpu-next
gpu-context = d3d11
gpu-api = d3d11
hwdec = d3d11va-copy
#If you change d3d11va-copy to d3d11va, you MUST change pixelformat to hw-pixelformat in the DV WEBDL profile.

target-colorspace-hint = no
target-colorspace-hint-mode = source

#---------------------------------------------------------------------------------------------------------------------------------------------#

# GPU Device Selection

#---------------------------------------------------------------------------------------------------------------------------------------------#

# Adjust all as needed.

# For Multi-GPU users:
# If a discrete GPU (dGPU) is available, the integrated GPU (iGPU) is not used.
# Note: This is a hopeful result, not a guaranteed one. Behavior may vary depending on system configuration.
# If an AMD GPU is detected, it is used. If no AMD GPU is found, a NVIDIA GPU is selected. If neither is available, it defaults to INTEL.
# Selection order: AMD → NVIDIA (preferred) → INTEL (fallback).
# Since AMD iGPUs exist, the script checks for AMD first. If both an AMD iGPU and an NVIDIA dGPU are present, the NVIDIA dGPU takes priority.
# INTEL iGPUs and dGPUs exist but are not declared. They are used purely as fallbacks when neither AMD nor NVIDIA GPUs are detected.
# If both the iGPU and dGPU are from the same brand (AMD or Intel), additional steps may be needed to ensure the preferred GPU is used.
# Console errors can be safely ignored.

d3d11-adapter = AMD
d3d11-adapter = NVIDIA

###############################################################################################################################################

# Scaling and Etc Options

###############################################################################################################################################

# Adjust all as needed.

scale = ewa_lanczossharp
scale-antiring = 0.4
cscale = ewa_lanczossharp
dscale = ewa_robidoux # Polar Catmull-Rom (0.0, 0.5)
dscale-param1 = 0.0
dscale-param2 = 0.5
dscale-antiring = 0.5
correct-downscaling = yes
sigmoid-upscaling = yes

dither-depth = 8 # Set to your displays bitdepth.
dither = fruit # Change to "ordered" if 10 or 12 bit display.

deband = no

###############################################################################################################################################

# Screenshot Options

###############################################################################################################################################

# Adjust all as needed.

screenshot-format = png
screenshot-sw = no
screenshot-high-bit-depth = no
screenshot-tag-colorspace = yes
screenshot-png-compression = 4
screenshot-directory = ~~/tmp #Does nothing when smart-native-screenshot.lua is used, use smart-native-screenshot.conf to change dir
screenshot-template = '%f_H%wH_M%wM_S%wS_MS.%wT_F%{estimated-frame-number}'

###############################################################################################################################################

# Subtitle Options

###############################################################################################################################################

# Adjust all as needed.

sub-auto = fuzzy
sub-font = "Gandhi Sans"
sub-font-size = 52
sub-color = 0.95/0.95/0.95/1
sub-blur = 0.2
sub-bold = yes
sub-border-size = 3
sub-border-color = 0.05/0.05/0.05/1
sub-spacing = 1.5
sub-shadow-offset = 1
sub-shadow-color = 0/0/0/0.25
sub-use-margins = no
sub-margin-y = 50
sub-margin-x = 100
sub-scale-with-window = no
sub-ass-override = no
demuxer-mkv-subtitle-preroll = yes
sub-fix-timing = no

###############################################################################################################################################

# Auto Profiles.

###############################################################################################################################################

# Analog Profile RARE

[Analog bt.470m]
profile-desc = "Analog bt.470m"
profile-cond = p["video-params/primaries"]=="bt.470m"
target-prim = bt.470m
gamut-mapping-mode = auto
libplacebo-opts = gamut_expansion=no
profile-restore = copy

#---------------------------------------------------------------------------------------------------------------------------------------------#

# SD Profiles

[SD NTSC]
profile-desc = "SD NTSC"
profile-cond = p["video-params/primaries"]=="bt.601-525"
target-prim = bt.601-525
gamut-mapping-mode = auto
libplacebo-opts = gamut_expansion=no
profile-restore = copy

[SD PAL]
profile-desc = "SD PAL"
profile-cond = p["video-params/primaries"]=="bt.601-625"
target-prim = bt.601-625
gamut-mapping-mode = auto
libplacebo-opts = gamut_expansion=no
profile-restore = copy

#---------------------------------------------------------------------------------------------------------------------------------------------#

# SDR UHD & HD Profiles

[SDR UHD & HD BT.709]
profile-desc = "SDR UHD & HD BT.709"
profile-cond = p["video-params/primaries"]=="bt.709"
target-prim = bt.709
gamut-mapping-mode = auto
libplacebo-opts = gamut_expansion=no
profile-restore = copy

[SDR UHD BT.2020]
profile-desc = "SDR UHD BT.2020"
profile-cond = p["video-params/gamma"]~="pq" and p["video-params/primaries"]=="bt.2020" and p["video-params/gamma"]=="bt.1886"
target-prim = bt.709
target-trc = bt.1886
gamut-mapping-mode = absolute
libplacebo-opts = gamut_expansion=no
profile-restore = copy

#---------------------------------------------------------------------------------------------------------------------------------------------#

# DV & HDR Profiles

[HDR WEBDL & Blu-ray / DV Blu-ray]
profile-desc = "HDR WEBDL & Blu-ray / DV Blu-ray"
profile-cond = p["video-params/gamma"]=="pq" and p["video-params/primaries"]=="bt.2020" and p["video-params/colorlevels"]~="full"
tone-mapping = spline # Adjust as needed.
target-prim = bt.709
target-trc = bt.1886
hdr-compute-peak = yes
gamut-mapping-mode = perceptual # Adjust as needed.
target-peak = 120 # Adjust as needed.
screenshot-tag-colorspace = no
profile-restore = copy

[DV WEBDL]
profile-desc = "DV WEBDL"
profile-cond = p["video-params/pixelformat"]=="p010" and p["video-params/colorlevels"]=="full" and p["video-params/colormatrix"]=="dolbyvision"
tone-mapping = bt.2446a # Adjust as needed.
target-prim = bt.709
target-trc = bt.1886
hdr-compute-peak = yes
gamut-mapping-mode = perceptual # Adjust as needed.
target-peak = 120 # Adjust as needed.
screenshot-tag-colorspace = no
profile-restore = copy

###############################################################################################################################################